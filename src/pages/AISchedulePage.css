/* src/pages/AISchedulePage.css */

/* ===== Root scale ===== */
:root{
  --ai-time-col: 84px;
  --ai-row-h: 36px;
}

/* ===== Page ===== */
.ai-schedule.container{
  max-width: 980px;
  margin: 0 auto;
  padding: 24px 16px 88px;
}
.ai-schedule.container h1{
  text-align: center;
  font-size: clamp(18px, 2.2vw, 26px);
  line-height: 1.25;
  margin: 0 0 14px;
}

/* ìƒë‹¨ ì¢Œ/ìš° ë²„íŠ¼ ë°” */
.topbar{
  display: grid;
  grid-template-columns: 1fr 1fr;
  align-items: center;
  margin: 8px 0 18px;
}
.topbar .left{ justify-self: start; }
.topbar .right{ justify-self: end; }

/* ===== Buttons ê¸°ë³¸ ìŠ¤íƒ€ì¼ ===== */
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:6px;
  height:36px; padding:0 14px; border-radius:10px;
  border:1px solid #d1d5db;
  background:#6b7280; color:#fff;
  cursor:pointer; user-select:none;
  width:auto;
  min-width:auto;
  flex:0 0 auto;
  font-weight:400;
}
.btn:hover{ filter:brightness(.98); }
.btn:active{ transform:translateY(1px); }

.btn.primary{ background:#111827; border-color:#111827; color:#fff; }
.btn.ghost  { background:#6b7280; border-color:#6b7280; color:#fff; }
/* ğŸš¨ ì·¨ì†Œ ë²„íŠ¼ ë¹¨ê°„ìƒ‰ ìŠ¤íƒ€ì¼ */
.btn.cancel { 
    background: #dc2626 !important; 
    border-color: #dc2626; 
    color: #fff; 
}
/* ------------------------------------------- */
.btn.sm     { height:30px; padding:0 10px; font-size:12px; border-radius:8px; }
.btn.xs     { height:28px; padding:0 8px; font-size:12px; border-radius:8px; }
.btn.micro{
  height:24px; line-height:24px;
  padding:0 10px; font-size:12px;
  border-radius:9999px;
  width:auto; min-width:auto;
}
.btn.on  { background:#4b5563; border-color:#4b5563; color:#fff; }
.btn.off { background:#9ca3af; border-color:#9ca3af; color:#fff; }

/* ===== Two boards ===== */
.boards{
  display:grid; grid-template-columns:1fr 1fr; gap:18px; align-items:start;
  margin-bottom:22px;
}
@media (max-width:980px){ .boards{ grid-template-columns:1fr; } }

/* ğŸš¨ ì‹œê°„í‘œ ì¹´ë“œ ì™¸ë¶€ í”„ë ˆì„ êµµê²Œ (2px) ë³€ê²½ */
.plan-card{
  background:#fff; 
  border:2px solid #000; /* êµµì€ ê²€ì€ìƒ‰ ì‹¤ì„  (2px) */
  border-radius:12px; overflow:hidden;
  box-shadow:0 1px 2px rgba(0,0,0,.04);
  display:flex; flex-direction:column; min-width:0; height:560px;
}

/* í—¤ë” */
.plan-head{
  position:sticky; top:0; z-index:1;
  display:grid; grid-template-columns:var(--ai-time-col) 1fr;
  gap:10px;
  background:#f8f9fc; 
  border-bottom:2px solid #000; /* í—¤ë” í•˜ë‹¨ êµ¬ë¶„ì„  êµµê²Œ (2px) ë³€ê²½ */
  padding:10px 12px; font-weight:700; color:#222;
}
.left-plan-titles{
  display:flex; align-items:center; justify-content:space-between; flex-grow:1; min-width:0;
}
.left-plan-titles .title-group{
  display:flex; gap:10px; align-items:center; flex-shrink:1; min-width:0;
}
.left-plan-titles .title-group .head-title:first-child{ font-weight:800; }
/* ğŸš¨ "ì‹œê°„ ë¹„ìš°ê¸° ì„¤ì • (í´ë¦­)" í…ìŠ¤íŠ¸ êµµê¸°ë¥¼ 400ìœ¼ë¡œ ë³€ê²½ */
.left-plan-titles .title-group .head-title{ font-weight:400; white-space:nowrap; } 

.left-plan-titles .btn.micro{ flex-shrink:0; margin-left:10px; }
.head-inline{ 
    /* ğŸš¨ ìˆ˜ì •: ë²„íŠ¼ ì˜¤ë¥¸ìª½ ì •ë ¬ì„ ìœ„í•´ justify-content: space-between ì ìš© */
    display:flex; 
    align-items:center; 
    gap:8px; 
    white-space:nowrap; 
    justify-content: space-between;
    flex-grow: 1; 
}
.head-title{ font-weight:700; }
.plan-head .btn.micro{ 
    margin-left:6px;
    flex-shrink: 0; 
    order: 999; 
}

/* ë³¸ë¬¸ ìŠ¤í¬ë¡¤ */
.plan-body{ flex:1 1 auto; overflow:auto; scrollbar-gutter:stable both-edges; }

/* í–‰ */
/* ğŸš¨ ì‹œê°„í‘œ í–‰ êµ¬ë¶„ì„  êµµê²Œ (1px ìœ ì§€) ë³€ê²½ */
.plan-row{
  display:grid; grid-template-columns:var(--ai-time-col) 1fr; align-items:center;
  min-height:var(--ai-row-h); padding:8px 12px;
  border-bottom:1px solid #000; 
  font-size:14px;
}
.plan-row:last-child{ border-bottom:0; } 

.plan-time{ color:#6b7280; font-variant-numeric:tabular-nums; font-feature-settings:"tnum"; }
.plan-what{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; border-radius:8px; padding:4px 6px; }

/* ìƒíƒœ ì»¬ëŸ¬ */
.plan-row.is-wake  .plan-what{ font-weight:700; }
.plan-row.is-fixed .plan-what{ background:#f6f7f9; color:#6a7688; }
.plan-row.is-meal  .plan-what{ background:#fff7ed; }
.plan-row.is-sleep .plan-what{ background:#f1f5f9; }
.plan-row.is-blocked .plan-what{ background:#fff1f1; border:1px solid #ffd2d2; color:#b91c1c; text-align:center; }
.plan-row.has-preview .plan-what{ background:#eef6ff; border:0; }

.plan-row.marker{ background:#fafafa; font-weight:700; }

/* ëŒ€ìƒ í•  ì¼ */
.section-head{
  display:flex; justify-content:center; align-items:center;
  flex-wrap:nowrap; gap:12px; margin:10px 0 12px;
}
.section-head .section-title{
  margin:0; line-height:1; white-space:nowrap;
}
.section-head .btn{
  width:auto; min-width:auto; flex:0 0 auto;
  display:inline-flex; height:30px; padding:0 12px;
  font-size:13px; border-radius:10px;
}

/* Todo pills */
.todo-pills{
    display:flex; flex-direction:column;
    gap:3px; 
}
.todo-pills.warn .pill{ background:#fff7f7; border-color:#ffdede; }

/* ğŸš¨ í•  ì¼ ëª©ë¡ í”„ë ˆì„ êµµê²Œ (2px) ë³€ê²½ ë° Flexbox ì„¤ì • ìœ ì§€ */
.pill{
  background:#fff; 
  border:2px solid #000; /* êµµì€ ê²€ì€ìƒ‰ ì‹¤ì„  (2px) ì ìš© */
  border-radius:14px;
  /* íŒ¨ë”© ìµœì†Œí™” */
  padding:2px 14px; 
  box-shadow:0 1px 2px rgba(0,0,0,.03);
  
  /* Flexbox ì»¨í…Œì´ë„ˆ */
  margin-left: 2px; 
  display:flex; 
  align-items:center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
  justify-content: space-between; /* í—¤ë”ì™€ ì»¨íŠ¸ë¡¤ ì˜ì—­ ì¢Œìš° ë¶„ë¦¬ */
  gap: 12px; /* Flex í•­ëª© ê°„ ê°„ê²© */
  min-height: 40px; /* í•­ëª© ìµœì†Œ ë†’ì´ ì§€ì • */
}
/* ğŸš¨ ì™¼ìª½ í…Œë‘ë¦¬ ê³µê°„ í™•ë³´ ë° is-first ì²˜ë¦¬ */
.pill.is-first{ 
  border-left:2px solid #000; 
  padding-left:14px; 
} 
.pill.disabled{ opacity:.55; filter:grayscale(.12); }

.pill-head{ 
  /* Flexbox í•˜ì—ì„œ 1ì—´ ì—­í•  (ì™¼ìª½) */
  flex-grow: 1; /* ë‚¨ì€ ê³µê°„ ëª¨ë‘ ì°¨ì§€ */
  display:flex; 
  align-items:center; /* ë‚´ë¶€ ìš”ì†Œ ì¤‘ì•™ ì •ë ¬ */
  gap:12px; 
  margin:4px 0; 
  padding: 0;
}
.pill-left{ 
    display:flex; 
    align-items:center; /* ë‚´ë¶€ ìš”ì†Œ ì¤‘ì•™ ì •ë ¬ */
    gap:8px; 
    min-width:0; 
}
.pill-title{ font-weight:800; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.pill-idx{ display:inline-block; min-width:0; background:transparent; border:0; box-shadow:none; color:#6b7280; font-weight:700; font-size:12px; margin-right:6px; padding:0; }
.pill-meta-inline{ display:flex; align-items:center; gap:8px; margin-left:12px; }
.chip{ display:inline-flex; align-items:center; height:22px; line-height:22px; padding:0 8px; border-radius:9999px; font-size:12px; }
.chip.fill   { background:#4b5563; color:#fff; font-weight:600; }
.chip.outline{ background:#fff; color:#6b7280; border:1px solid #e5e7eb; }

.pill-controls{
  /* Flexbox í•˜ì—ì„œ 2ì—´ ì—­í•  (ì˜¤ë¥¸ìª½) */
  flex-shrink: 0;
  display:flex;
  align-items:center; /* ë‚´ë¶€ ìš”ì†Œ ì¤‘ì•™ ì •ë ¬ */
  gap:6px;
  margin:0;
  padding: 0;
  min-height: 28px; 
}

/* label ë° input ìŠ¤íƒ€ì¼ (ì—¬ë°± ì••ì¶• ë° ì¤‘ì•™ ì •ë ¬) */
.pill-controls label {
    display: flex; 
    align-items: center; 
    gap: 4px; 
    font-size: 13px; 
    line-height: 1; 
    white-space: nowrap;
    margin: 0; 
    padding: 0; 
}
.pill-controls label, 
.pill-controls input[type="number"], 
.pill-controls .btn {
  vertical-align: middle; 
}

.pill-controls input[type="number"] {
    height: 26px; 
    padding: 0 4px;
    font-size: 13px;
    box-sizing: border-box; 
    border-radius: 6px; 
    min-width: 60px;
    margin: 0; 
}

.pill-controls .btn{ 
    height:26px; 
    padding:0 10px; 
    font-size:12px; 
    border-radius:8px; 
    width:auto; 
    min-width:auto; 
}

/* Scrollbar */
.plan-body::-webkit-scrollbar{ width:8px; height:8px; }
.plan-body::-webkit-scrollbar-thumb{ background:#cbd5e1; border-radius:8px; }
.plan-body::-webkit-scrollbar-track{ background:transparent; }

/* Boards ë™ì¼ ë†’ì´ */
.ai-schedule .boards .plan-card{ height:600px; }
@media (max-width:980px){ .ai-schedule .boards .plan-card{ height:560px; } }

/* ===== v5.2 í•˜ë‹¨ ë²„íŠ¼ ì¢Œìš° ê³„íší‘œ í­ê³¼ ì •ë ¬ ===== */
.ai-schedule .bottom-bar{
  display:grid;
  grid-template-columns:1fr 1fr; /* ì¢Œ/ìš° ë²„íŠ¼ ê° 1fr */
  gap:18px;
  width:100%;
  max-width:980px;
  margin:20px auto 0;
  padding:0 0 20px 0;
  box-sizing:border-box;
}
.ai-schedule .bottom-bar .btn{
  width:100%;   /* ê° ë²„íŠ¼ì´ ì¹¸ ì „ì²´ ì±„ìš°ê¸° */
  height:50px;
  font-size:16px;
  border-radius:10px;
  min-width:130px;
  flex:unset;              /* flex ì œê±° */
}
@media (max-width:640px){
  .ai-schedule .bottom-bar{
    display:flex;
    flex-direction:column;
    gap:10px;
    padding:16px;
  }
  .ai-schedule .bottom-bar .btn{
    width:100%;
    height:44px;
  }
}

/* --- Mobile: pill two-row layout --- */
@media (max-width: 600px) {
  /* Make each pill vertical stack so we can separate head and controls */
  .pill {
    flex-direction: column;
    align-items: stretch;
    gap: 6px;
    padding: 10px 12px;
    min-height: 64px;
  }

  /* First row: index + title + meta (D-day / due) */
  .pill-head {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 0;
    margin: 0;
    width: 100%;
  }

  /* left block (idx + title + chips) should take remaining space */
  .pill-left {
    display: flex;
    align-items: center;
    gap: 8px;
    min-width: 0; /* allow text truncation */
    flex: 1 1 auto;
    overflow: hidden;
  }

  .pill-idx { flex: 0 0 auto; margin-right: 6px; }
  .pill-title { flex: 1 1 auto; min-width: 0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

  /* meta (D-day, due date) aligned to right of first row */
  .pill-meta-inline {
    display: flex;
    align-items: center;
    gap: 6px;
    flex: 0 0 auto;
    white-space: nowrap;
    margin-left: 8px;
  }

  /* Second row: controls row full width */
  .pill-controls {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: flex-end; /* controls stick to right */
    gap: 8px;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  /* Make toggle button touch-friendly but small */
  .pill-controls .btn {
    flex: 0 0 auto;
    height: 36px;
    padding: 0 10px;
    min-width: 72px;
    font-size: 13px;
  }

  /* number inputs keep fixed moderate width */
  .pill-controls input[type="number"] {
    flex: 0 0 84px; /* width for min/max boxes */
    min-width: 72px;
    height: 36px;
    padding: 6px 8px;
    box-sizing: border-box;
    font-size: 13px;
  }

  /* if screen is really narrow, allow controls to wrap to multiple lines */
  @media (max-width: 360px) {
    .pill-controls {
      flex-wrap: wrap;
      justify-content: flex-start;
      gap: 6px;
    }
    .pill-controls .btn { min-width: 64px; }
    .pill-controls input[type="number"] { flex: 1 1 44%; min-width: 120px; }
  }

  /* chips should shrink and wrap if needed */
  .chip { font-size: 11px; height: 20px; padding: 0 6px; }

  /* keep pill-head title from overflowing entire card */
  .pill-head .pill-left { overflow: hidden; }
}
